# URLの拡張子を省略
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^(.*)$ $1\.html 
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.+)$ $1\.php

# Basic認証
AuthUserFile https://kyokobaba.com/.htpasswd
AuthGroupFile /dev/null
AuthName "Say the magic words!"
AuthType Basic
require valid-user

# 拡張子有のURLをリダイレクト
RewriteCond %{THE_REQUEST} \.(php|html)\ HTTP
RewriteRule ^(.*)\.(php|html)$ /$1 [R=301,L]

# wwwをリダイレクト
RewriteEngine On
RewriteCond %{HTTP_HOST} ^www\.stg\.kyokobaba\.com
RewriteRule ^(.*)$ https://stg.kyokobaba.com/$1 [R=301,L]

# httpsにリダイレクト
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [R,L]

# PHPをHTML上で動作させるための記述
<FilesMatch "\.html$">
  AddType application/x-httpd-php .html
</FilesMatch>